name: JWT ìë™ìƒì„±

on:
  schedule:
    - cron: '12 4 * * *'  # ë§¤ì¼ ì¼ë³¸ ì‹œê°„ ê¸°ì¤€ ì˜¤í›„ 1ì‹œ ì‹¤í–‰ (UTC ê¸°ì¤€ 4ì‹œ)
  workflow_dispatch:      # ìˆ˜ë™ ì‹¤í–‰ë„ ê°€ëŠ¥í•˜ê²Œ

jobs:
  build:
    runs-on: ubuntu-latest

    env:
      APPLICATION_ID: ${{ secrets.APPLICATION_ID }}
      PRIVATE_KEY: ${{ secrets.PRIVATE_KEY }}

    steps:
      - name: ì½”ë“œ ë‹¤ìš´ë¡œë“œ
        uses: actions/checkout@v3

      - name: Node.js ì„¤ì¹˜
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
        run: npm install

      - name: í˜„ì¬ ì‹œê°„ ì¶œë ¥
        run: |
          echo "ğŸ•’ í˜„ì¬ ì‹œê°„ (UTC):"
          date -u
          echo "ğŸ•’ í˜„ì¬ ì‹œê°„ (JST):"
          TZ=Asia/Tokyo date

      - name: JWT ë§Œë“¤ê¸° ì‹¤í–‰
        run: node index.js
